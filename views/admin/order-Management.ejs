<%- include('../adminLayout/adminheader.ejs') %>
<%- include('../adminLayout/adminSidebar.ejs') %>
    <%- include('../adminLayout/adminNavbar.ejs')%>

<div class="main-panel">
  <div class="card">
    <div class="card-body">
      <div class="row">
        <h3 class="card-title p-3"><strong>ORDER DETAILS</strong></h3>      
                <div class="table-responsive">
                  <table class="table table-dark">
                    <thead>
                      <tr>
                        <th>Product Images</th>
                        <th>User Name</th>
                        <th>Date</th>
                        <th>Total Price</th>
                        <th>Order Id</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    <tbody>
                        <% if (orderData) { %>
                            <% orderData.forEach((orderItem) => { %>
                              <tr>
                                <td>
                                  <% orderItem.products.forEach((productItem) => { %>
                                    <% const product = productItem.productId; %>
                                    <% if (product && product.image && product.image[0]) { %>
                                      <img style="width: 50px; height: 50px" src="/adminAssets/adminImages/<%= product.image[0] %>" alt="No image">
                                    <% } %>
                                  <% }) %>
                                </td>
                                <td><%= orderItem.userName %></td>
                                <td><%= orderItem.date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: '2-digit' }).replace(/\//g,'-') %></td>
                                <td><%= orderItem.totalAmount %></td>
                                <td><%= orderItem._id %></td>
                                
                                <td>
                                  <a href="/admin/single-order/<%= orderItem._id %>"><button class="btn btn-outline-success">Details</button></a>
                                </td>
                              </tr>
                            <% }) %>
                          <% } %>
                          
                          
                          
                          
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          
        
      </div>  
    </div>
  </div>
</div> 


<%- include('../adminLayout/adminFooter.ejs')%>